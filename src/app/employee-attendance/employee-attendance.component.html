<div class="card">
<br>
<br>
<br>
 
  <div class="button-container">
    <button *ngIf="!checkInStatus?.isCheckedIn" 
            pButton 
            label="تسجيل بصمة الدخول" 
            (click)="checkIn()" 
            class="p-button-success check-button">
    </button>

    <button *ngIf="checkInStatus?.isCheckedIn" 
            pButton 
            label="تسجيل بصمة الخروج" 
            (click)="checkOut()" 
            class="p-button-danger check-button">
    </button>
  </div>
<br>
<br>
<br>
  <p-toolbar styleClass="mb-4">
    <ng-template style="float: right;" pTemplate="center">
      <h3>دوام الموظفين</h3>
    </ng-template>
  </p-toolbar>

  <div class="حالة البصمة p-mb-4">
    <p-card>
      <div class="p-d-flex p-ai-center p-jc-between">
        <div>
          <h4>حالة البصمة</h4>
          <p *ngIf="checkInStatus?.isCheckedIn" class="status-checked-in">
            تم تسجيل بصمة الدخول من الوقت {{ checkInStatus?.lastCheckInTime | date:'shortTime' }}
          </p>
          <p *ngIf="!checkInStatus?.isCheckedIn" class="status-checked-out">
            تم تسجيل بصمة الخروج
          </p>
        </div>
        <div class="status-indicator" [ngClass]="{'checked-in': checkInStatus?.isCheckedIn}"></div>
      </div>
    </p-card>
  </div>
  <p-table [value]="attendanceHistory" [paginator]="true" [rows]="10">
    <ng-template pTemplate="header">
      <tr>
        <th>وقت الدخول</th>
        <th>وقت الخروج</th>
        <th>مدة العمل</th>
        <th>التاريخ</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-record>
      <tr>
        <td>{{ record.checkInTime | date:'shortTime' }}</td>
        <td>{{ record.checkOutTime | date:'shortTime' || '-' }}</td>
        <td>{{ formatDuration(record.checkInTime, record.checkOutTime) }}</td>
        <td>{{ record.checkInTime | date:'mediumDate' }}</td>
      </tr>
    </ng-template>
  </p-table>
</div>
